# 서비스 구현



## 테스트 구현

1. DI

   1. @ExtendWith(MockitoExtension.class)
   2. service 는 @InjectMocks
   3. 나머지는 @Mock

2. test 코드

   1. @test

   2. 함수 작성

      given_when_then(){} 

   3. 비교

      assertThat()

```java
@DisplayName("비즈니스 로직 - 게시글")
@ExtendWith(MockitoExtension.class) // spring boot slice test 안하고 해보기 - 가볍게 만들기
class ArticleServiceTest {

    @InjectMocks private ArticleService sut;

    @Mock
    private ArticleRepository articleRepository;

    @DisplayName("게시글을 검색하면, 게시글 리스트를 반환한다.")   // 게시글, 페이지네이션, 정렬
    @Test
    void givenSearchParameter_whenSearchArticles_thenReturnArticleList() {
        // Given

        // When
        Page<ArticleDto> articles = sut.searchArticles(); // 제목, 본문, ID, 닉네임, 해시태그

        // Then
        assertThat(articles).isNotNull();
    }
```

1. 게시판
   1. 정렬
   2. 검색
   3. 모든 게시글 보기
   4. 선택한 게시글만 보기
   5. 루트 페이지로 이동
2. 게시글
   1. 게시글 CRUD
   2. 댓글 CRUD

3. 로그인

   spring security



4. 한거

   도메인, dto, 서비스, 서비스테스트, 도메인과 dto 연동코드, response(필요정보만)



## 기타 설정

1. JPA buddy  ignore 설정 추가

   .jpb 폴더 생성되서

2. erd 속성 이름 주의점

   예약어랑 같으면 안됨

3. OSIV off 

   * application.yml에서 off

   ```yaml
   spring:
   	jpa:
   		open-in-view: false
   ```

   *  domain, dto 분리 -> 서비스가 나간뒤 트랜잭션 종료, 서비스에서 마무리가 된 데이터가 controller로 오게끔

     ![image-20230116210637823](md-images/image-20230116210637823.png)

   * 각 layer의 독립성 보장

     service - 도메인, dto 존재 앎

     controller는 request나 respone 존재만 앎

